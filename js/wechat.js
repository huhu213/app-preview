function Q(e){if(!e)return null;if(e.constructor==String){var n=document.querySelectorAll(e);return n}return e}function FastClick(e){var n,o=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(o,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(o,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(o,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(o,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(o,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(o,arguments)},FastClick.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(n,o,t){var a=Node.prototype.removeEventListener;"click"===n?a.call(e,n,o.hijacked||o,t):a.call(e,n,o,t)},e.addEventListener=function(n,o,t){var a=Node.prototype.addEventListener;"click"===n?a.call(e,n,o.hijacked||(o.hijacked=function(e){e.propagationStopped||o(e)}),t):a.call(e,n,o,t)}),"function"!=typeof e.onclick)||(n=e.onclick,e.addEventListener("click",function(e){n(e)},!1),e.onclick=null)}Q.trim=function(e){var n=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return String(e).replace(n,"")},Q.addClass=function(e,n){e=Q(e);for(var o=n.split(/\s+/),t=e.className,a=" "+t+" ",i=0,l=o.length;l>i;i++)a.indexOf(" "+o[i]+" ")<0&&(t+=(t?" ":"")+o[i]);return e.className=Q.trim(t),e},Q.hasClass=function(e,n){if(e=Q(e),1===!e.nodeType)return!1;var o=Q.trim(n).split(/\s+/),t=o.length;for(className=e.className.split(/\s+/).join(" ");t--;)if(!new RegExp("(^| )"+o[t]+"( |$)").test(className))return!1;return!0},Q.removeClass=function(e,n){e=Q(e);for(var o=e.className.split(/\s+/),t=n.split(/\s+/),a=o.length,i=t.length,l=0;i>l;l++)for(;a--;)if(o[a]==t[l]){o.splice(a,1);break}return e.className=o.join(" "),e},Q.tap=function(e,n){var o,t,a,i,l,r;o="1.0.1",a=2e3,r=function(e,n){return function(){return e.apply(n,arguments)}},"ontouchstart"in document.documentElement?(e.addEventListener("touchstart",r(function(e){i=(new Date).getTime(),t=!1},e)),e.addEventListener("touchmove",r(function(e){t=!0},e)),e.addEventListener("touchend",r(function(e){l=(new Date).getTime(),!t&&a>l-i&&n(e)},e)),e.addEventListener("touchcancel",r(function(e){n(e)},e))):e.addEventListener("click",r(function(e){n(e)},e))},Q.parent=function(e,n){for(n=n?n:function(){return!0};(e=e.parentNode)&&1==e.nodeType;)if(n(e))return e;return null},Q.getData=function(e,n){return window.nativeStorage?window.nativeStorage.get(e):window.localStorage?window.localStorage[e]:Q.getCookie(e)},Q.setData=function(e,n){return window.nativeStorage?window.nativeStorage.set(e,n):void(window.localStorage?window.localStorage[e]=n:Q.setCookie(e,n,{expires:new Date("2020-12-23")}))},Q.remove=function(){for(var e,n=0,o=arguments.length;o>n;n++){e=document.querySelector(arguments[n]);try{e.parentNode.removeChild(e)}catch(t){}}},Q.loadJs=function(e){e.id=e.id||"LoadedJs"+(new Date).getTime(),e.isRemove=e.isRemove||!0;var n=document.createElement("script");n.id=e.id,n.type="text/javascript",n.charset=e.charset||"gb2312";var o=function(){e.callback&&e.callback(),e.isRemove&&Q.remove("#"+e.id)};n.readyState?n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechange=null,o())}:n.onload=function(){o()},n.src=e.src;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)},Q.remoteSetData=function(e,n,o){Q.loadJs({src:"http://fread.qq.com/redisTool?type=set&key="+encodeURIComponent(e)+"&value="+encodeURIComponent(n),charset:"utf-8",callback:function(){"undefined"!=typeof redisData&&o&&o(redisData)}})},Q.remoteGetData=function(e,n){Q.loadJs({src:"http://fread.qq.com/redisTool?type=get&key="+encodeURIComponent(e),charset:"utf-8",callback:function(){"undefined"!=typeof redisData&&n&&n(redisData)}})},Q.getQuery=function(e,n){var o=new RegExp("(^|&|\\?|#)"+n+"=([^&#]*)(&|$|#)",""),t=e.match(o);return t?t[2]:""},Q.debug=function(e){var n=Q("#DebugContainer");n||(n=document.createElement("div"),n.id="DebugContainer",document.body.appendChild(n)),n&&(n.innerHTML+=e+"<br>",console&&console.log&&console.log(e))},Q.delQueryValue=function(e,n){if(!Q.getQuery(e,n))return e;for(var o=(e.indexOf("?"),e.substr(0,e.indexOf("?"))),t=e.substr(e.indexOf("?")+1),a=t.split("&"),i=0,l=a.length;l>i;i++){var r=a[i].split("=")[0];if(r==n){a.splice(i,1);break}}return 0==a.length?o:o+"?"+a.join("&")},FastClick.prototype.deviceIsAndroid=0<navigator.userAgent.indexOf("Android"),FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,n){var o,t;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),t=n.changedTouches[0],o=document.createEvent("MouseEvents"),o.initMouseEvent(this.determineEventType(e),!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),o.forwardedTouchEvent=!0,e.dispatchEvent(o)},FastClick.prototype.determineEventType=function(e){return this.deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(e){var n;this.deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(n=e.value.length,e.setSelectionRange(n,n)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var n,o;if(n=e.fastClickScrollParent,!n||!n.contains(e)){o=e;do{if(o.scrollHeight>o.offsetHeight){n=o,e.fastClickScrollParent=o;break}o=o.parentElement}while(o)}n&&(n.fastClickLastScrollTop=n.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var n,o,t;if(1<e.targetTouches.length)return!0;if(n=this.getTargetElementFromEventTarget(e.target),o=e.targetTouches[0],this.deviceIsIOS){if(t=window.getSelection(),t.rangeCount&&!t.isCollapsed)return!0;if(!this.deviceIsIOS4){if(o.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=o.identifier,this.updateScrollParent(n)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=n,this.touchStartX=o.pageX,this.touchStartY=o.pageY,200>e.timeStamp-this.lastClickTime&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var e=e.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var n,o,t=this.targetElement;if(!this.trackingClick)return!0;if(200>e.timeStamp-this.lastClickTime)return this.cancelNextClick=!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(o=e.changedTouches[0],t=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||t,t.fastClickScrollParent=this.targetElement.fastClickScrollParent),o=t.tagName.toLowerCase(),"label"===o){if(n=this.findControl(t)){if(this.focus(t),this.deviceIsAndroid)return!1;t=n}}else if(this.needsFocus(t))return 100<e.timeStamp-n||this.deviceIsIOS&&window.top!==window&&"input"===o?(this.targetElement=null,!1):(this.focus(t),this.deviceIsIOS4&&"select"===o||(this.targetElement=null,e.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(n=t.fastClickScrollParent)&&n.fastClickLastScrollTop!==n.scrollTop?!0:(this.needsClick(t)||(e.preventDefault(),this.sendClick(t,e)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return this.targetElement&&!e.forwardedTouchEvent&&e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0},FastClick.prototype.onClick=function(e){return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(e=this.onMouse(e),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var n,o;if("undefined"==typeof window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if((n=document.querySelector("meta[name=viewport]"))&&(-1!==n.content.indexOf("user-scalable=no")||o>31&&window.innerWidth<=window.screen.width))return!0}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(e){return new FastClick(e)},"undefined"!=typeof define&&define.amd?define(function(){return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.define&&define("lib/fastclick",[],function(){return FastClick}),window.FastClick=FastClick;var slideShow=function(e,n){var o=this;o.startX,o.startY,o.moveX=0,o.moveY=0,o.move2Left=1,o.curIndex=n.curIndex?n.curIndex:0,o.speedThreshold=300,o.moveThreshold=25,o.startTime,o.endTime,o.hasShowImgViewer=0,o.isSlideLast=n.isSlideLast||0,o.width=n.width||0,o.count=n.count||0,o.init(e)};slideShow.prototype={updateImgIndex:function(e){var n=this;e.style.webkitTransition="-webkit-transform 0s",e.style.webkitTransform="translate(-"+n.width*n.curIndex+"px, 0px)",n.loadImg(n.curIndex)},init:function(e){var n=this;if(e.style.width=n.count*n.width+"px",n.liArr=e.querySelectorAll("li"),n.isSlideLast){var o=e.parentNode.clientWidth;n.adjustDis=o-n.width}n.updateImgIndex(e),e.addEventListener("touchstart",function(e){if(e.touches.length){n.startTime=(new Date).getTime();var o=e.touches[0];n.startX=o.pageX,n.startY=o.pageY;var t=e.target;if("P"==t.tagName||"SPAN"==t.tagName){var a="P"==t.tagName?t:t.parentNode,i=/\-?[0-9]+\.?[0-9]*/g,l=a.style.webkitTransform.match(i);n.startTran=l&&l[1]?parseInt(l[1]):0,a.style.webkitTransition=""}}},!1),e.addEventListener("touchmove",function(e){e.preventDefault();var o=e.target;if(e.touches.length){var t=e.touches[0];if(n.currentX=t.pageX,n.currentY=t.pageY,n.moveX=n.currentX-n.startX,n.moveY=n.currentY-n.startY,"P"!=o.tagName&&"SPAN"!=o.tagName){n.move2Left=n.moveX<0?1:0,this.style.webkitTransition="-webkit-transform 0s";var a=-n.width*n.curIndex+n.moveX;n.move2Left&&n.curIndex<n.count-1||!n.move2Left&&n.curIndex>0&&n.curIndex!=n.count-1?this.style.webkitTransform="translate("+a+"px, 0)":Math.abs(n.moveX)<n.width/3&&(n.isSlideLast&&n.curIndex==n.count-1&&(a=-n.width*n.curIndex+n.adjustDis+n.moveX),this.style.webkitTransform="translate("+a+"px, 0)")}else if(n.isYSlide()){var i="P"==o.tagName?o:o.parentNode;if(n.minMoveHeight=i.clientHeight-i.parentNode.clientHeight,n.minMoveHeight<=0)return;var l=/\-?[0-9]+\.?[0-9]*/g,r=i.style.webkitTransform.match(l);n.lastMoveY=r&&r[1]?parseInt(r[1]):0,n.moveY<0&&n.lastMoveY>=-(n.minMoveHeight+20)?i.style.webkitTransform="translate(0, "+(n.startTran+n.moveY)+"px)":n.moveY>0&&n.lastMoveY<=20&&(i.style.webkitTransform="translate(0, "+(n.startTran+n.moveY)+"px)")}}},!1),e.addEventListener("touchend",function(e){if(n.endTime=(new Date).getTime(),n.endTime-n.startTime<100&&0==Math.floor(n.moveX))return void e.preventDefault();var o=e.target;if("P"==o.tagName||"SPAN"==o.tagName){var t="P"==o.tagName?o:o.parentNode;return void(n.isYSlide()&&(t.style.webkitTransition="-webkit-transform 1.2s cubic-bezier(0.19, 1, 0.22, 1) 0s",n.lastMoveY<-n.minMoveHeight?(t.style.webkitTransform="translate(0, -"+n.minMoveHeight+"px)",n.lastMoveY=-n.minMoveHeight):n.lastMoveY>=0&&(t.style.webkitTransform="translate(0, 0)",n.lastMoveY=0)))}this.style.webkitTransition="-webkit-transform 1.2s cubic-bezier(0.19, 1, 0.22, 1) 0s",Math.abs(n.moveX)/(n.endTime-n.startTime)*1e3<n.speedThreshold&&Math.abs(n.moveX)<n.width/3?this.style.webkitTransform=n.isSlideLast&&n.curIndex==n.count-1?"translate(-"+(n.width*n.curIndex-n.adjustDis)+"px, 0px)":"translate(-"+n.width*n.curIndex+"px, 0px)":(n.curIndex=n.move2Left?(n.curIndex+=1)>=n.count?n.count-1:n.curIndex:(n.curIndex-=1)<=0?0:n.curIndex,this.style.webkitTransform=n.isSlideLast&&n.curIndex==n.count-1?"translate(-"+(n.width*n.curIndex-n.adjustDis)+"px, 0px)":"translate(-"+n.width*n.curIndex+"px, 0px)",n.loadImg(n.curIndex)),n.moveX=0},!1)},loadImg:function(e){var n,o,t=this;(n=t.liArr[e])&&(o=n.querySelector("img"))&&"1"!=o.getAttribute("loaded")&&(o.addEventListener("load",function(e){this.setAttribute("loaded","1"),this.parentNode.querySelector(".downloaderBg")&&(this.parentNode.querySelector(".downloaderBg").style.height=this.clientHeight+"px")},!1),o.setAttribute("src",o.getAttribute("url"))),(n=t.liArr[e+1])&&(o=n.querySelector("img"))&&"1"!=o.getAttribute("loaded")&&(o.addEventListener("load",function(e){this.setAttribute("loaded","1"),this.parentNode.querySelector(".downloaderBg")&&(this.parentNode.querySelector(".downloaderBg").style.height=this.clientHeight+"px")},!1),o.setAttribute("src",o.getAttribute("url"))),(n=t.liArr[e-1])&&(o=n.querySelector("img"))&&"1"!=o.getAttribute("loaded")&&(o.addEventListener("load",function(e){this.setAttribute("loaded","1"),this.parentNode.querySelector(".downloaderBg")&&(this.parentNode.querySelector(".downloaderBg").style.height=this.clientHeight+"px")},!1),o.setAttribute("src",o.getAttribute("url")))},isYSlide:function(){var e=this;return Math.abs(e.moveX)/Math.abs(e.moveY)<.57?1:0},clickHandler:function(e){var n=this;document.addEventListener("touchmove",n.preventDefault,!1);var o=e.parentNode;if(Q.hasClass(o,"imgViewer"))o.style.display="none",document.removeEventListener("touchmove",n.preventDefault,!1);else if(Q.hasClass(o,"atlasContainer")){var t=o.querySelector(".imgViewer");if(t.style.display="block",!n.hasShowImgViewer){var a,i=t.querySelector("ul"),l=i.querySelectorAll("li"),r=0,d=l.length;for(r;d>r;r++)l[r].style.width=i.clientWidth+"px",a=l[r].querySelector("img"),a.setAttribute("src",a.getAttribute("url"));new slideShow(i,{count:d,width:i.clientWidth,isSlideLast:0}),i.style.marginTop=-i.clientHeight/2+"px",n.hasShowImgViewer=1}}}};var commentScroller=function(e){var n=this;n.startX,n.startY,n.moveX=0,n.moveY=0,n.startTime,n.endTime,n.speedThreshold=300,n.moveThreshold=25,n.init(e)};commentScroller.prototype={init:function(e){var n=this;e.addEventListener("touchstart",function(e){if(e.preventDefault(),e.touches.length){n.startTime=(new Date).getTime();var o=e.touches[0];n.startX=o.pageX,n.startY=o.pageY;var t=e.currentTarget,a=/\-?[0-9]+\.?[0-9]*/g,i=t.style.webkitTransform.match(a);n.startTran=i&&i[1]?parseInt(i[1]):0,t.style.webkitTransition=""}},!1),e.addEventListener("touchmove",function(e){e.preventDefault();var o=e.currentTarget;if(e.touches.length){var t=e.touches[0];if(n.currentX=t.pageX,n.currentY=t.pageY,n.moveX=n.currentX-n.startX,n.moveY=n.currentY-n.startY,n.isYSlide()&&(n.minMoveHeight=o.clientHeight-o.parentNode.clientHeight,!(n.minMoveHeight<=0))){var a=/\-?[0-9]+\.?[0-9]*/g,i=o.style.webkitTransform.match(a);n.lastMoveY=i&&i[1]?parseInt(i[1]):0,n.moveY<0&&n.lastMoveY>=-(n.minMoveHeight+30)?o.style.webkitTransform="translate(0, "+(n.startTran+n.moveY)+"px)":n.moveY>0&&n.lastMoveY<=30&&(o.style.webkitTransform="translate(0, "+(n.startTran+n.moveY)+"px)")}}},!1),e.addEventListener("touchend",function(e){if(n.endTime=(new Date).getTime(),n.endTime-n.startTime<100&&0==Math.floor(n.moveX))return void e.preventDefault();var o=e.currentTarget;n.isYSlide()&&(o.style.webkitTransition="-webkit-transform 1.2s cubic-bezier(0.19, 1, 0.22, 1) 0s",n.lastMoveY<-n.minMoveHeight?(o.style.webkitTransform="translate(0, -"+n.minMoveHeight+"px)",n.lastMoveY=-n.minMoveHeight):n.lastMoveY>=0&&(o.style.webkitTransform="translate(0, 0)",n.lastMoveY=0))},!1)},isYSlide:function(){var e=this;return Math.abs(e.moveX)/Math.abs(e.moveY)<.57?1:0}};var openAppController=function(e){function o(n){var o=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),t=e.location.search.substr(1).match(o);return null!=t?unescape(t[2]):null}function t(e){var n="";if(e)for(var o=0;o<e.length;o++)c=e.charAt(o),"<"!=c&&">"!=c&&(n+=c);return n}function a(){return a.seed=(9301*a.seed+49297)%233280,a.seed/233280}function l(e){return Math.ceil(a()*e)}function r(){key=l(1e8)+"",sum=0;for(var e=0;e<key.length;e++)sum+=parseInt(key[e]);return sum+="",key.length+key+sum.length+sum}return a.today=new Date,a.seed=a.today.getTime(),{isInstallNews:void 0,isInstallLive:void 0,isInstallReading:void 0,isIpad:!1,showDone:!1,newsDownloadState:1,videoDownloadState:1,qnreadingDownloadState:1,newsVersion:0,contentW:320,initStart:function(){"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?openAppController.init():document.addEventListener("WeixinJSBridgeReady",openAppController.init),openAppController.adjustBtnWidth(),openAppController.reformTime(),openAppController.reformComment(),openAppController.reCheck(),openAppController.newWechatStyle();var n=Q.getData(newsId+"clickPosition");"undefined"!=typeof n&&0!=openAppController.getScrollTop()&&(e.scrollTo(0,n),e.localStorage.removeItem(newsId+"clickPosition")),openAppController.sendBoss("pageView")},isHasLiReaded:function(){var e,n=document.querySelectorAll(".relNews ul li"),o=0,t=n.length;for(o;t>o;o++)e=n[o],"1"===qnreadingOpen&&e.setAttribute("url","http://kuaibao.qq.com/s/"+e.getAttribute("newsid")),Q.getData(e.getAttribute("newsid"))&&Q.addClass(e,"hasReadLi");var e,a=document.querySelectorAll(".currentHots ul li"),t=a.length,o=0;for(o;t>o;o++)e=a[o],"1"===qnreadingOpen&&e.setAttribute("url","http://kuaibao.qq.com/s/"+e.getAttribute("newsid")+"?clickfrom=weixinhot"),Q.getData(e.getAttribute("newsid"))&&Q.addClass(e,"hasReadLi")},getCurrentHots:function(e){var n=document.querySelector(".currentHots");if(n){if(e&&"0"==e.ret){var o,t=e.info,a=t.length,i=0,l=[];for(l.push("1"===qnreadingOpen?'<p class="titleQnreading">今日热点</p>':'<p class="title">今日热点</p>'),l.push('<ul class="ulCH">'),i;a>i&&8>i;i++)o=t[i],"1"==o.articletype?(l.push('<li newsid="'+o.id+'" flag="'+o.flag+'" chlid="'+o.chlid+'" url="'+o.url+'">'),l.push('<p class="titleHot">'+o.title+"</p>"),l.push('<div class="multiPics">'),o.imgurl.length>=4?(l.push('<div class="imgWrap"><img src="'+o.imgurl[1]+'"/></div>'),l.push('<div class="imgWrap"><img src="'+o.imgurl[2]+'"/></div>'),l.push('<div class="imgWrap"><img src="'+o.imgurl[3]+'"/></div>')):l.push('<img src="'+o.imgurl[0]+'"/>'),l.push("</div>"),l.push('<span class="typeHot">'+o.pubtime+"</span>"),l.push('<span class="typeHot">'+o.src+"</span>"),l.push("</li>")):(l.push('<li class="singlePicLi" newsid="'+o.id+'" flag="'+o.flag+'" chlid="'+o.chlid+'" url="'+o.url+'">'),l.push('<div class="singlePic"><img src=" '+o.imgurl[0]+'"/></div>'),l.push('<div class="singlePicRight">'),l.push('<p class="titleHot"> '+o.title+"</p>"),l.push('<span class="typeHot">'+o.pubtime+"</span>"),l.push('<span class="typeHot">'+o.src+"</span>"),l.push("</div>"),l.push("</li>"));l.push("</ul>"),n.innerHTML=l.join(""),openAppController.currentHotsClick(".currentHots")}else n.querySelector(".loading").style.display="none";var r=document.querySelector(".alone_bottom_downloader");r&&(r.style.display="block"),openAppController.isHasLiReaded()}},getBaike:function(e){var n=document.querySelector(".baike");if(n)if(e&&"0"==e.ret){var o,t=e.info,a=t.length,i=0,l=[];for(l.push('<p class="title">相关百科</p>'),l.push("<ul>"),i;a>i&&8>i;i++)o=t[i],l.push("<li>"),l.push('<div class="baikeTitle">'),l.push('<span class="baikeTag">'+o.tagname+"</span>"),l.push('<span class="knowMore" url="'+o.link+'">了解更多</span>'),l.push("</div>"),l.push("<div>"),o.img&&o.img.length>0&&(l.push('<div class="thumb">'),l.push('<img src="'+o.img+'"/>'),l.push("</div>")),l.push('<div class="intro">'),l.push("<p>"+o.desc+"></p>"),l.push("</div>"),l.push("</div>"),l.push("</li>");l.push("</ul>"),n.innerHTML=l.join(""),openAppController.baikeClick()}else n.querySelector(".loading").style.display="none"},showCommentOrigImg:function(e){var n=e.getAttribute("origUrl"),o=document.querySelector("#ImageBox");o||(o=openAppController.createImageBox()),o.addEventListener("click",function(e){var n=e.currentTarget;n.style.display="none"},!1),o.style.display="block";var t=o.querySelector("img");t.setAttribute("src",n)},createImageBox:function(){var e=document.createElement("div");return e.id="ImageBox",e.className="imgViewer",document.body.appendChild(e),e.innerHTML='<img src="" class="origImg">',e},processComment:function(){var e,n,o,t,a,i=document.querySelectorAll(".commentScrollWrap .contentBox"),l=0,r=i.length;for(l;r>l;l++)e=i[l],n=e.querySelector(".content"),o=e.querySelector(".moreBtn"),t=e.querySelector(".commentPic"),t?(a=t.querySelector("img"),a&&(width=a.getAttribute("data-width"),height=a.getAttribute("data-height"),height/width<.8?(a.style.height="100%",a.style.marginLeft="-"+(60*width/height-75)/2+"px"):(a.style.width="100%",a.style.marginTop="-"+(75*height/width-60)/2+"px"),a.addEventListener("click",function(e){var n=e.target;openAppController.showCommentOrigImg(n)},!1),n.offsetHeight>48?(Q.addClass(n,"picOver"),o&&(o.style.display="block"),o.addEventListener("click",function(e){openAppController.showCommentDialog(e,"picOver"),e.preventDefault()},!1)):o&&(o.style.display="none"))):n.offsetHeight>72?(Q.addClass(n,"over"),o&&(o.style.cssFloat="left")&&(o.style.display="block"),o.addEventListener("click",function(e){openAppController.showCommentDialog(e,"over"),e.preventDefault()},!1)):o&&(o.style.display="none")},showCommentDialog:function(e,n){var o=e.currentTarget,t=o.parentNode.querySelector(".content");t&&Q.hasClass(t,n)&&(Q.removeClass(t,n),o.style.display="none")},newWechatStyle:function(){var n=document.querySelector(".relNews");if(n){n.style.display="block";var o,t,a=n.querySelectorAll("li"),i=a&&a.length?a.length:0;for(o=0;i>o;o++)t=a[o].querySelector("img"),t&&(t.addEventListener("load",function(e){var n=e.target,o=n.clientWidth,t=n.clientHeight;.8>t/o?(n.style.height="100%",n.style.marginLeft="-"+(60*o/t-75)/2+"px"):(n.style.width="100%",n.style.marginTop="-"+(75*t/o-60)/2+"px")},!1),t.setAttribute("src",t.getAttribute("url")));openAppController.currentHotsClick(".relNews")}var l=document.querySelector(".commentBox");l&&(l.style.display="block",openAppController.processComment());var r=2*e.screen.availHeight;if("1"==closeHotNews){var d=document.querySelector(".alone_bottom_downloader");return d&&(d.style.display="block"),void openAppController.isHasLiReaded()}var s=document.querySelector(".currentHots");if(s){var c=s.getBoundingClientRect().top,u=!1,p=Q.getQuery(location.href,"openid");r>=c&&!u&&(s.querySelector(".loading").style.display="block","undefined"!=newsId&&Q.loadJs({src:currentHotUrl+"?openid="+p+"&newsid="+newsId+"&callback=openAppController.getCurrentHots&v="+(new Date).getTime(),charset:"utf-8"}),u=!0,setTimeout(function(){var e=s.querySelector(".loading");e&&(e.style.display="none")},3e3)),e.onscroll=function(){c=s.getBoundingClientRect().top,r>=c&&!u&&(s.querySelector(".loading").style.display="block","undefined"!=newsId&&Q.loadJs({src:currentHotUrl+"?openid="+p+"&newsid="+newsId+"&callback=openAppController.getCurrentHots&v="+(new Date).getTime(),charset:"utf-8"}),u=!0,setTimeout(function(){var e=s.querySelector(".loading");e&&(e.style.display="none")},3e3))}}},baikeClick:function(){baikes=document.querySelectorAll(".baike ul li .knowMore");var e,n=baikes.length,o=0;for(o;n>o;o++)e=baikes[o],e.addEventListener("click",openAppController.baikeHandler)},baikeHandler:function(e){var n=e.currentTarget,o=n.getAttribute("url");openAppController.sendBoss("baike"),document.location.href=o},currentHotsClick:function(e){var n,o=document.querySelectorAll(e+" ul li"),t=o.length,a=0;for(a;t>a;a++)n=o[a],n.addEventListener("touchstart",function(e){var n=e.currentTarget;n.style.background="#e7e7e7"},!1),n.addEventListener("touchmove",function(e){var n=e.currentTarget;n.style.background=""},!1),n.addEventListener("touchend",function(e){var n=e.currentTarget;n.style.background=""},!1),n.addEventListener("click",openAppController.currentHotsHandler)},currentHotsHandler:function(e){var n,o,t=e.currentTarget,a=t.parentNode,i=t.getAttribute("url"),l="";Q.hasClass(a,"ulRelNews")&&(n=t.getAttribute("newsid"),openAppController.sendBoss("relNews",{newsid:n}),l="refer=wx_relatednews"),Q.hasClass(a,"ulCH")&&(n=t.getAttribute("newsid"),o=t.getAttribute("flag"),openAppController.sendBoss("currentHots",{newsid:n,flag:o}),l="refer=wx_hotnews"),Q.setData(t.getAttribute("newsid"),"1"),Q.setData(newsId+"clickPosition",openAppController.getScrollTop());var r=i.indexOf("?");if(r>-1){var d=i.substr(i.indexOf("?")+1);i+=d.length>0?"&"+l:l}else i+="?"+l;setTimeout(function(){document.location.href=i},100)},getScrollTop:function(){var n;return e.pageYOffset?n=e.pageYOffset:document.compatMode&&"BackCompat"!=document.compatMode?n=document.documentElement.scrollTop:document.body&&(n=document.body.scrollTop),n},adjustBtnWidth:function(){var n=document.body.clientWidth,o=document.getElementById("content"),t=e.getComputedStyle(o,null),a=n-parseInt(t["margin-left"])-parseInt(t["margin-right"]);a=720>a&&a>0?a:280,openAppController.contentW=a;var i=document.querySelector("#imgdownload");i&&(i.style.width=a+"px")},addBossParam:function(e){if(e&&e.href){var n=e.href,a="reqkey="+r()+"&mmuin="+t(o("mmuin"))+"&openid="+Q.getQuery(document.location.href,"openid");e.href=n.indexOf("?")>-1?n+"&"+a:n+"?"+a}},reCheck:function(){setTimeout(function(){openAppController.showModuleDownload(),openAppController.showModuleDownloadVideo(),openAppController.showModuleDownloadReading()},6e3)},init:function(){openAppController.checkIsInstall()},checkIsInstall:function(){var e=navigator.userAgent.toLowerCase(),n=(/iphone/i.test(e)?!0:!1,/android/i.test(e)?!0:!1);!n&&WeixinJSBridge.env&&(openAppController.isIpad=WeixinJSBridge.env("model").toLowerCase().indexOf("ipad")>-1?!0:!1),n?(openAppController.hasApp("com.tencent.news","qqnews://can_open_me_if_install_and_regeister_this_scheme",220),openAppController.hasApp("com.tencent.qqlive","tenvideo2://can_open_me_if_install_and_regeister_this_scheme",0),"1"==jumpYYBDownload&&openAppController.hasApp("com.tencent.android.qqdownloader","tmast://can_open_me_if_install_and_regeister_this_scheme",370),openAppController.hasApp("com.tencent.reading","qnreading://can_open_me_if_install_and_regeister_this_scheme",0)):openAppController.isIpad?openAppController.hasApp("com.tencent.news","qqnewshd://can_open_me_if_install_and_regeister_this_scheme",0):(openAppController.hasApp("com.tencent.news","qqnews://can_open_me_if_install_and_regeister_this_scheme",0),openAppController.hasApp("com.tencent.qqlive","tenvideo2://can_open_me_if_install_and_regeister_this_scheme",0),"1"==jumpYYBDownload&&openAppController.hasApp("com.tencent.android.qqdownloader","tmast://can_open_me_if_install_and_regeister_this_scheme",0),openAppController.hasApp("com.tencent.reading","qnreading://can_open_me_if_install_and_regeister_this_scheme",0))},hasApp:function(e,n,o){"undefined"!=typeof WeixinJSBridge?WeixinJSBridge.invoke("getInstallState",{packageName:e,packageUrl:n},function(n){var t=n.err_msg;if(t.indexOf("get_install_state:yes")>-1)if(o){var a=t.split("_"),i=a.length>0?Number(a[a.length-1]):0;"com.tencent.news"==e&&(openAppController.newsVersion=i),i>=o?openAppController.installCallback(e,!0):openAppController.installCallback(e,!1)}else openAppController.installCallback(e,!0);else openAppController.installCallback(e,!1)}):openAppController.installCallback(e,!1)},installCallback:function(e,n){if("com.tencent.news"==e?openAppController.isInstallNews=n:"com.tencent.qqlive"==e?openAppController.isInstallLive=n:"com.tencent.reading"==e?openAppController.isInstallReading=n:"1"==YYBOpen&&"1"==jumpYYBDownload&&"com.tencent.android.qqdownloader"==e&&(openAppController.isInstallYYB=n),"1"==YYBOpen&&"1"==jumpYYBDownload){if((void 0==openAppController.isInstallNews||void 0==openAppController.isInstallLive||void 0==openAppController.isInstallYYB||void 0==openAppController.isInstallReading)&&!openAppController.isIpad)return}else if((void 0==openAppController.isInstallNews||void 0==openAppController.isInstallLive||void 0==openAppController.isInstallReading)&&!openAppController.isIpad)return;openAppController.moduleLoad();var o=navigator.userAgent.toLowerCase(),t=/android/i.test(o)?!0:!1;t&&(downloader.queryDownloadState("news"),downloader.queryDownloadState("video"),downloader.queryDownloadState("reading"))},bottomBtnLoad:function(){openAppController.isIpad?openAppController.isInstallNews?openAppController.callBack():openAppController.showDownload():enforceForVideo?openAppController.isInstallLive?openAppController.isInstallNews?!openAppController.isInstallWeishi&&isShowWeishi?openAppController.showWeishiDownload():openAppController.callBack():openAppController.showDownload():openAppController.showVideoDownload():openAppController.isInstallNews?!openAppController.isInstallLive&&isShowVideo?openAppController.showVideoDownload():!openAppController.isInstallWeishi&&isShowWeishi?openAppController.showWeishiDownload():openAppController.callBack():openAppController.showDownload()},moduleLoad:function(){jumpYYBDownload&&YYBOpen&&(openAppController.isInstallYYB?(downloader.isJumpYYB=!0,openAppController.sendBoss("installYYB_canJumpYYB")):downloader.isJumpYYB=!1,downloader.init()),openAppController.isInstallNews?(openAppController.showModuleOpen(),openAppController.sendBoss("installNews"),openAppController.bindModuleClick("news"),"0"===qnreadingOpen&&openAppController.showCommentBannerNew()):(openAppController.showModuleDownload(),openAppController.sendBoss("uninstallNews")),
openAppController.isInstallLive?(openAppController.showModuleOpenVideo(),openAppController.sendBoss("installVideo"),openAppController.bindModuleClick("video")):(openAppController.showModuleDownloadVideo(),openAppController.sendBoss("uninstallVideo")),openAppController.isInstallReading?(openAppController.showModuleOpenReading(),openAppController.bindModuleClick("qnreading"),"1"===qnreadingOpen&&(openAppController.sendBoss("hasinstallQnReading"),openAppController.showCommentBannerNew())):(openAppController.showModuleDownloadReading(),"1"===qnreadingOpen&&openAppController.sendBoss("uninstallQnReading"))},showModuleDownload:function(){if(1==openAppController.newsDownloadState){openAppController.newsDownloadState=1;var e=document.querySelectorAll(".unified_downloader");if(e)for(var n=0,a=e.length;a>n;n++){var i=e[n],l=i.id;if(l&&moduleInfo){var d=moduleInfo[l];if(d&&("news"==i.getAttribute("type")||!i.getAttribute("type"))){if(openAppController.isIpad)i.href=ipadDownloadUrl+"&reqkey="+r()+"&mmuin="+t(o("mmuin"))+"&openid="+Q.getQuery(document.location.href,"openid");else if(jumpYYBDownload&&YYBOpen&&downloader.isJumpYYB){var s=navigator.userAgent.toLowerCase(),c=s.match(/micromessenger\/([\d\.]+)/);c=c&&c[1]?c[1]:0,i.href="tmast://appdetails?pname=com.tencent.news&oplist=1;2&channelid="+newsChannel+"&via=ANDROIDWX.YYB.QNEWSPLUGIN&hostpname=com.tencent.mm&hostversioncode="+c}else i.href=downloadUrl+"&reqkey="+r()+"&mmuin="+t(o("mmuin"))+"&openid="+Q.getQuery(document.location.href,"openid");var u=i.querySelector(".downloader_text");u.innerHTML=d.downloadText,i.style.visibility="visible"}}}}},showModuleOpen:function(){openAppController.newsDownloadState=3;var e=document.location.href,n=openAppController.getQuery(e,"openid"),o=n?"openid="+n:"",t=document.querySelectorAll(".unified_downloader");if(t)for(var a=0,i=t.length;i>a;a++){var l=t[a],r=l.id;if(r&&moduleInfo){var d=moduleInfo[r];if(d&&("news"==l.getAttribute("type")||!l.getAttribute("type"))){l.className="unified_downloader downloader_open";var s;s=openAppController.isIpad?d.ipadOpenUrl:d.openUrl,l.href=o?s+"&extinfo="+encodeURIComponent(o):s;var c=l.querySelector(".downloader_text");c.innerHTML=d.openText,l.style.visibility="visible"}}}},showModuleDownloadVideo:function(){if(1==openAppController.videoDownloadState){openAppController.videoDownloadState=1;var e=document.querySelectorAll(".unified_downloader");if(e)for(var n=0,a=e.length;a>n;n++){var i=e[n],l=i.id;if(l&&moduleInfo){var d=moduleInfo[l];if(d&&"video"==i.getAttribute("type")){i.href=downloadVideoUrl+"&reqkey="+r()+"&mmuin="+t(o("mmuin"))+"&openid="+Q.getQuery(document.location.href,"openid");var s=i.querySelector(".downloader_text");s.innerHTML=d.downloadText,i.style.visibility="visible"}}}}},showModuleOpenVideo:function(){openAppController.videoDownloadState=3;var e=document.querySelectorAll(".unified_downloader");if(e)for(var n=0,o=e.length;o>n;n++){var t=e[n],a=t.id;if(a&&moduleInfo){var i=moduleInfo[a];if(i&&"video"==t.getAttribute("type")){t.className="unified_downloader downloader_open";var l="V1_135_"+newsId;t.href=i.openUrl+(-1==i.openUrl.indexOf("?")?"?":"&")+"from="+l;var r=t.querySelector(".downloader_text");r.innerHTML=i.openText,t.style.visibility="visible"}}}},showModuleDownloadReading:function(){if(1==openAppController.qnreadingDownloadState){openAppController.qnreadingDownloadState=1;var e=document.querySelectorAll(".unified_downloader[type='qnreading']");if(e){var n,a,i,l=0,d=e.length;for(l;d>l;l++)n=e[l].getAttribute("id"),n&&moduleInfo&&moduleInfo[n]&&(a=moduleInfo[n],e[l].href=a.downloadUrl+"&reqkey="+r()+"&mmuin="+t(o("mmuin"))+"&openid="+Q.getQuery(document.location.href,"openid"),i=e[l].querySelector(".downloader_text"),i&&(i.innerHTML=a.downloadText),e[l].style.visibility="visible")}}},showModuleOpenReading:function(){openAppController.qnreadingDownloadState=3;var e=document.location.href,n=document.querySelectorAll(".unified_downloader[type='qnreading']"),o=openAppController.getQuery(e,"openid"),t=o?"openid="+o:"";if(n){var a,i,l,r=0,d=n.length;for(r;d>r;r++){if(a=n[r].getAttribute("id"),!a||!moduleInfo||!moduleInfo[a])return;i=moduleInfo[a],n[r].className="unified_downloader downloader_open",n[r].href=t?i.openUrl+"&extinfo="+encodeURIComponent(t):i.openUrl,l=n[r].querySelector(".downloader_text"),l&&(l.innerHTML=i.openText),n[r].style.visibility="visible"}var s=document.querySelector('.alone_bottom_downloader .unified_downloader[type="qnreading"]');s&&(s.addEventListener("touchstart",function(e){var n=e.currentTarget;n.style.background="#ed684d"}),s.addEventListener("touchmove",function(e){var n=e.currentTarget;n.style.background="#e94220"}),s.addEventListener("touchend",function(e){var n=e.currentTarget;n.style.background="#e94220"}))}},showCommentBannerNew:function(){var e=document.querySelector("#comment_banner_new"),n="",o=document.location.href,t=openAppController.getQuery(o,"openid"),a=t?"openid="+t:"";if(e&&(n=e.getAttribute("href")),e&&"block"!=e.style.display){var i=e.querySelector(".comment_banner_new_num");if(i)var l=Number(i.innerText);if(0==l){var r="打开腾讯新闻，参与讨论",d=e.querySelector("p");d.innerHTML=r}else 1e3>l||(l>=1e3&&1e4>l?Q.addClass(i,"less-comment"):(i.innerText=openAppController.transNum(l),Q.addClass(i,"more-comment")));a&&(e.href=n+(-1==n.indexOf("?")?"?":"&")+"extinfo="+encodeURIComponent(a)),e.style.display="block",e.addEventListener("touchstart",function(e){var n=e.currentTarget;n.style.background="#e7e7e7"},!1),e.addEventListener("touchmove",function(e){var n=e.currentTarget;n.style.background=""},!1),e.addEventListener("touchend",function(e){var n=e.currentTarget;n.style.background=""},!1),e.addEventListener("click",openAppController.commentBannerClick)}},transNum:function(e){switch(!0){case 0==e:re="";break;case 1e4>e:re=e;break;case 1e8>e:re=parseFloat(e/1e4).toFixed(1)+"万";break;default:re=parseFloat(e/1e8).toFixed(1)+"亿"}return re},commentBannerClick:function(e){openAppController.sendBoss("open_comment_click")},bindModuleClick:function(e){if("news"==e)for(var n=document.querySelectorAll('.atlas_imgArea[data-atlasqnreading="0"], .rn_imgArea, .mobvideonews_imgArea[data-mobvideoqnreading="0"], .relateVideo[data-mobvideoqnreading="0"]'),o=0,t=n.length;t>o;o++){var a=n[o];a.addEventListener("click",openAppController.moduleImgClick)}if("video"==e)for(var n=document.querySelectorAll(".videoClips_imgArea"),o=0,t=n.length;t>o;o++){var a=n[o];a.addEventListener("click",openAppController.moduleImgClick)}if("qnreading"==e){var n=document.querySelectorAll('.atlas_imgArea[data-atlasqnreading="1"], .mobvideonews_imgArea[data-mobvideoqnreading="1"], .relateVideo[data-mobvideoqnreading="1"], .qnread .qn_content .qn_img'),o=0,i=n&&n.length?n.length:0;for(o;i>o;o++)n[o].addEventListener("click",openAppController.moduleImgClick)}},moduleImgClick:function(n){var o,t=n.currentTarget;o=t&&Q.hasClass(t,"qn_img")?t.parentNode.parentNode:t.parentNode;var a=o.querySelector(".unified_downloader");if(downloader){downloader.sendbossInit(a);var i=a.href;e.location.href=i}},formatDate:function(e){var n=new Date(1e3*e),o=new Date,t=parseInt((o.getTime()-n.getTime())/1e3);return 0>t?re="0秒":(re=t>=86400?parseInt(t/86400)+"天":t>=3600?parseInt(t/3600)+"小时":t>=60?parseInt(t/60)+"分钟":t+"秒",re+="前"),re},asyncShowFloatDownload:function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.charset="charset",e.onload=function(){},e.src="http://mat1.gtimg.com/www/js/newsapp/wechat/downloadController.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)},getQuery:function(e,n){var o=new RegExp("(^|&|\\?|#)"+n+"=([^&#]*)(&|$|#)",""),t=e.match(o);return t?t[2]:""},time2txt:function(e,n){var o,t=new Date(1e3*e),a=n?new Date(1e3*n):new Date,i=new Date(60*Math.floor((a.getTime()+288e5)/864e5)*60*24*1e3),l=Math.floor((t.getTime()+288e5)/864e5),r=Math.floor(i/864e5),d=r-l,s=parseInt((a.getTime()-t.getTime())/1e3);switch(!0){case 0>s:o="刚刚";break;case 60>s:o=s+"秒前";break;case 3600>s:o=parseInt(s/60)+"分钟前";break;case 86400>s:o=1==d?"昨天"+t.getHours()+"点"+t.getMinutes()+"分":parseInt(s/3600)+"小时前";break;case 172800>s:o=2==d?"前天"+t.getHours()+"点"+t.getMinutes()+"分":"昨天"+t.getHours()+"点"+t.getMinutes()+"分";break;case 259200>s:o=2==d?"前天":t.getMonth()+1+"月"+t.getDate()+"日";break;default:o=t.getMonth()+1+"月"+t.getDate()+"日"}return o},reformTime:function(){var e=document.querySelectorAll(".time_need_reform");for(i=0,n=e.length;i<n;i++){var o=e[i],t=o.getAttribute("time"),a=openAppController.time2txt(t);o.innerHTML+=a}},reformComment:function(){for(var e=document.querySelectorAll(".comment .c_text"),n=0,o=e.length;o>n;n++){var t=e[n],a=t.innerHTML,i=5*Math.floor((openAppController.contentW-60)/15)-10;t.innerHTML=a.length<i?a:a.slice(0,i)+"……"}},sendbossInit:function(e,n){var o=[];o.push(-1!=n.indexOf("atlas")?"atlas":-1!=n.indexOf("comment")?"comment":-1!=n.indexOf("relatedNews")?"relatedNews":-1!=n.indexOf("videoClips")?"videoClips":n.indexOf("qnreading")?"qnreading":"others"),o.push(e),openAppController.sendBoss(o.join("_"))},sendBoss:function(e,n){var o=document.location.href,t=[];t.push("sIp="),t.push("iQQ="+(this.getQuery(o,"mmuin")||this.getQuery(o,"openid"))),t.push("sBiz="+encodeURIComponent("appnews.front.newsOpen")),t.push("sOp="+e),t.push("iSta=0"),t.push("iTy=1702"),t.push("iFlow="),t.push("sOsType="+mobileType),t.push("sNewsId="+newsId),t.push("sGroupId="+this.getQuery(o,"groupid")),t.push("sMsgId="+this.getQuery(o,"msgid")),t.push("sDt="+this.getQuery(o,"dt")),t.push("sCv="+this.getQuery(o,"cv")),t.push("sRefer="+this.getQuery(o,"refer")),t.push("1"===qnreadingOpen?"iReserved1=1":"iReserved1=0"),t.push("1"===qnreadingOpen&&"腾讯天天快报"===kuaibaoName?"iReserved2=1":"1"===qnreadingOpen&&"快报"===kuaibaoName?"iReserved2=2":"iReserved2="),t.push("iReserved3="),t.push("iReserved4="),t.push(n&&n.newsid?"sReserved1="+n.newsid:"sReserved1="),n&&n.flag&&t.push("sReserved2="+n.flag);var a=new Image;a.onload=function(){},a.src="http://btrace.qq.com/collect?"+t.join("&")}}}(window),showMoreNews={isBeginHide:!1,init:function(){for(var e=Q("#content .text, #content .preLoad, #content .truthContainer .truthHeader, h1, h2, h3, .introduction, .atlas, .map,.videoClips,.split_line,.atlasContainer, .picDesc, .mod_player, .atlasTitleHot, mobvideonews"),n=0,o=e.length;o>n;n++){var t=e[n],a=t.innerHTML;showMoreNews.isBeginHide?Q.addClass(t,"showMoreHide"):Q.hasClass(t,"map")&&(t.style.display="block"),/\$\$\$/i.test(a)&&(t.innerHTML=a.replace(/<\!\-\-\$\$\$\-\->|\$\$\$/gi,""),showMoreNews.createMoreHTML(t),showMoreNews.isBeginHide=!0)}},createMoreHTML:function(e){var n=document.createElement("div");n.id="showMore",n.className=showMoreNews.isBeginHide?"showMoreAll showMoreHide":"showMoreAll",n.innerHTML='<span class="showMore" hideFocus="true">点击展开全文</span>',n.style.cssText="textAlign:center,margin:0 -16px 30px",e.parentNode.insertBefore(n,e.nextSibling),n.addEventListener("click",showMoreNews.clickHandle)},removeMoreHTML:function(){var e=Q(".showMoreAll"),e=e&&e.length>0?e[0]:e;e.parentNode.removeChild(e)},clickHandle:function(){openAppController.sendBoss("showMoreNews");var e=Q("#content .showMoreHide");if(0!=e.length){{e[0]}showMoreNews.timeOutShow(e)}},timeOutShow:function(e){for(var n=Q("#content .showMoreHide"),o=0,t=n.length;t>o;o++){var a=n[o];if(Q.removeClass(a,"showMoreHide"),Q.hasClass(a,"map")&&(a.style.display="block"),"showMore"==a.id)break}showMoreNews.removeMoreHTML(),"function"==typeof createVideoPlayer&&createVideoPlayer()}},weChatBridgeReady={init:function(){weChatBridgeReady.bindShareWithApp(),weChatBridgeReady.bindShareWithTimeline();for(var e=document.querySelectorAll("#content .preLoad img"),n=0,o=e.length;o>n;n++){var t=e[n];t.addEventListener("click",weChatBridgeReady.clickHandler)}},clickHandler:function(e){openAppController.sendBoss("imagePreview");var n=[],o=document.querySelectorAll("#content .preLoad img");if(e.target.getAttribute("preview-src")){for(var t=0,a=o.length;a>t;t++){var i=o[t];i.getAttribute("preview-src")&&n.push(i.getAttribute("preview-src"))}WeixinJSBridge.invoke("imagePreview",{current:e.target.getAttribute("preview-src"),urls:n})}},bindShareWithApp:function(){var e=document.location.href,n=Q.delQueryValue(e,"mmuin");n=Q.delQueryValue(n,"openid"),e.indexOf("isShare=1")>-1||(n=-1!=n.indexOf("?")?n+"&isShare=1":n+"?isShare=1"),WeixinJSBridge.on("menu:share:appmessage",function(e){WeixinJSBridge.invoke("sendAppMessage",{appid:"",img_url:contentModel.img_url,img_width:"65",img_height:"65",link:n,desc:contentModel.desc,title:contentModel.title},function(e){!e||"send_app_msg:confirm"!=e.err_msg&&"send_app_msg:ok"!=e.err_msg||openAppController.sendBoss("send_app_msg"),WeixinJSBridge.log(e.err_msg)})})},bindShareWithTimeline:function(){var e=document.location.href,n=Q.delQueryValue(e,"mmuin");n=Q.delQueryValue(n,"openid"),e.indexOf("isShare=1")>-1||(n=-1!=n.indexOf("?")?n+"&isShare=1":n+"?isShare=1"),WeixinJSBridge.on("menu:share:timeline",function(e){WeixinJSBridge.invoke("shareTimeline",{img_url:contentModel.img_url,img_width:"65",img_height:"65",link:n,desc:"view.inews.qq.com",title:contentModel.title},function(e){e&&"share_timeline:ok"==e.err_msg&&openAppController.sendBoss("share_timeline"),WeixinJSBridge.log(e.err_msg)})})}},downloader={isPreventDefault:!0,isJumpYYB:void 0,hasInited:!1,init:function(){var e=navigator.userAgent.toLowerCase(),o=/android/i.test(e)?!0:!1;if(o)if("1"==jumpYYBDownload){if(YYBOpen){if(downloader.hasInited||void 0==downloader.isJumpYYB)return;downloader.hasInited=!0}}else try{var t=[];if(t=e.match(/microMessenger\/(\d)\.([0-9.]+)/),t.length>1){var a=Number(t[1]);5>a&&(downloader.isPreventDefault=!1)}}catch(l){}else downloader.isPreventDefault=!1;var r=Q("#imgdownload");if(r.length>0){var d=r[0];"touchstart"in document.documentElement?d.addEventListener("touchstart",downloader.clickHandler):d.addEventListener("click",downloader.clickHandler)}var s=document.querySelectorAll(".unified_downloader");if(s.length>0)for(i=0,n=s.length;i<n;i++){var d=s[i];"touchstart"in document.documentElement?Q.tap(d,downloader.moduleClick):d.addEventListener("click",downloader.moduleClick,!1)}"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.on?WeixinJSBridge.on("wxdownload:state_change",downloader.downloadStateChange):document.addEventListener("WeixinJSBridgeReady",function(){"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.on&&WeixinJSBridge.on("wxdownload:state_change",downloader.downloadStateChange)})},queryDownloadState:function(e){"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.on?WeixinJSBridge.invoke&&("news"==e?downloadClick.queryDownloadState():"video"==e?downloadClickVideo.queryDownloadState():"weishi"==e?downloadClickWeishi.queryDownloadState():"reading"==e&&downloadClickQnreading.queryDownloadState()):document.addEventListener("WeixinJSBridgeReady",function(){"news"==e?downloadClick.queryDownloadState():"video"==e?downloadClickVideo.queryDownloadState():"weishi"==e?downloadClickWeishi.queryDownloadState():"reading"==e&&downloadClickQnreading.queryDownloadState()})},downloadStateChange:function(e){e&&e.state&&(e.download_id==downloadInit.newsDownloadValue?downloadClick.downloadStateChange(e):e.download_id==downloadInit.videoDownloadValue?downloadClickVideo.downloadStateChange(e):e.download_id==downloadInit.qnreadingDownloadValue&&downloadClickQnreading.downloadStateChange(e),"function"!=typeof transferDownloadState||!e.download_id||e.download_id==downloadInit.newsDownloadValue&&e.download_id==downloadInit.videoDownloadValue&&e.download_id==Q.getData(downloadClickWeishi.downloadId)||transferDownloadState(e))},clickHandler:function(e){var n=e.target;"a"!=n.tagName.toLowerCase()&&(n=Q.parent(n,function(e){return"a"==e.tagName.toLowerCase()?!0:!1}));var o=n.getAttribute("app");"news"==o?downloadClick.clickHandler(e):"video"==o?downloadClickVideo.clickHandler(e):"weishi"==o&&downloadClickWeishi.clickHandler(e),downloader.isPreventDefault&&e.preventDefault()},moduleClick:function(e){var n=e.target;Q.hasClass(n,"unified_downloader")||(n=Q.parent(n,function(e){return Q.hasClass(e,"unified_downloader")?!0:!1})),"video"==n.getAttribute("type")?Q.hasClass(n,"downloader_downloading")?downloadClickVideo.stopDownload(n):Q.hasClass(n,"downloader_download")?downloadClickVideo.startDownload(n):Q.hasClass(n,"downloader_install")&&downloadClickVideo.installDownload(n):"qnreading"==n.getAttribute("type")?Q.hasClass(n,"downloader_downloading")?downloadClickQnreading.stopDownload(n):Q.hasClass(n,"downloader_download")?downloadClickQnreading.startDownload(n):Q.hasClass(n,"downloader_install")&&downloadClickQnreading.installDownload(n):(downloader.isJumpYYB&&(downloader.isPreventDefault=!1),Q.hasClass(n,"downloader_downloading")?downloadClick.stopDownload(n):Q.hasClass(n,"downloader_download")?downloadClick.startDownload(n):Q.hasClass(n,"downloader_install")&&downloadClick.installDownload(n)),!Q.hasClass(n,"downloader_open")&&downloader.isPreventDefault&&e.preventDefault(),e.stopPropagation(),downloader.sendbossInit(n)},sendbossInit:function(e){var n=[];Q.hasClass(e,"downloader_downloading")?n.push("downloading"):Q.hasClass(e,"downloader_install")?n.push("install"):Q.hasClass(e,"downloader_open")?n.push("open"):Q.hasClass(e,"downloader_download")&&n.push("download");var o=e.id;if(-1!=o.indexOf("atlas"))n.push("atlas");else if(-1!=o.indexOf("comment"))n.push("comment");else if(-1!=o.indexOf("relatedNews"))n.push("relatedNews");else if(-1!=o.indexOf("videoClips"))n.push("videoClips");else if(-1!=o.indexOf("alone_bottom_downloader")){var t=e.parentNode.querySelector(".relateVideo");n.push(t?"aloneDownloaderWithVideo":"aloneDownloader")}else n.push(-1!=o.indexOf("qnreading")?"qnreading":-1!=o.indexOf("mobvideonews")?"mobvideonews":"others");n.push("click"),openAppController.sendBoss(n.join("_"))}};downloader.init();var downloadClick={downloadId:"downloadId",taskName:"TencentNews",queryDownloadState:function(){var e=downloadInit.newsDownloadValue;e&&WeixinJSBridge.invoke("queryDownloadTask",{download_id:e},function(e){downloadClick.downloadStateChange(e)})},downloadStateChange:function(e){e&&e.state&&(e.download_id&&e.download_id!=downloadInit.newsDownloadValue||("download_succ"==e.state&&downloadClick.downloadComplete(),"default"==e.state,"downloading"==e.state&&downloadClick.showDownloading(),"download_fail"==e.state&&downloadClick.clearTask()))},clickHandler:function(e){var n=e.target;"a"!=n.tagName.toLowerCase()&&(n=Q.parent(n,function(e){return"a"==e.tagName.toLowerCase()?!0:!1})),Q.hasClass(n,"client_new_downloading")?downloadClick.stopDownload(n):Q.hasClass(n,"client_new_tips")?downloadClick.startDownload(n):Q.hasClass(n,"client_new_install")&&downloadClick.installDownload(n)},startDownload:function(e){if("1"==jumpYYBDownload&&downloader.isJumpYYB)return void openAppController.sendBoss("JumpYYBStartDownLoad");var n=e.href;"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("addDownloadTask",{task_name:downloadClick.taskName,task_url:n,file_md5:downloadMd5},function(e){var n=e.err_msg;if(n.indexOf("add_download_task:ok")>-1){var o=e.download_id,t=downloadInit.newsDownloadName;downloadInit.newsDownloadValue=o,Q.setData(t,o),downloadClick.showDownloading(),openAppController.sendBoss("startDownLoad"),-1==document.location.href.indexOf("isShare=1")&&Q.remoteSetData(t,o,function(e){})}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},showDefaultState:function(){var e=document.getElementById("imgdownload");if(e&&"news"==e.getAttribute("app")){downloadClick.clearStyle(e),Q.addClass(e,"client_new_tips");var n=e.querySelector("span.down-text");n&&(n.innerHTML="下载腾讯新闻客户端")}var o=document.querySelectorAll(".unified_downloader");if(o)for(var t=0,a=o.length;a>t;t++){var i=o[t],l=i.id;if(l&&moduleInfo){var r=moduleInfo[l];if(r&&i&&"news"==i.getAttribute("type")){var d=i.querySelector(".downloader_text");d.innerHTML=r.downloadText;var s=i.querySelector(".downloader_progress");s&&(s.style.display="none"),downloadClick.clearModuleStyle(i),Q.addClass(i,"downloader_download")}}}},showDownloading:function(){openAppController.newsDownloadState=2;var e=document.getElementById("imgdownload");if(e&&"news"==e.getAttribute("app")){downloadClick.clearStyle(e),Q.addClass(e,"client_new_downloading");var n=e.querySelector("span.down-text");n&&(n.innerHTML="正下载腾讯新闻客户端")}var o=document.querySelectorAll(".unified_downloader");if(o)for(var t=0,a=o.length;a>t;t++){var i=o[t],l=i.id;if(!l||!moduleInfo)break;var r=moduleInfo[l];if(!r)break;if(i&&"news"==i.getAttribute("type")){var d=i.querySelector(".downloader_text");d.innerHTML="正下载腾讯新闻客户端";var s=i.querySelector(".downloader_progress");s&&(s.style.display="block"),downloadClick.clearModuleStyle(i),Q.addClass(i,"downloader_downloading")}}},clearTask:function(){if(window.localStorage&&localStorage.removeItem)try{window.localStorage.clear()}catch(e){window.localStorage.clear()}var n=downloadInit.newsDownloadName;Q.remoteSetData(n,"",function(e){})},downloadComplete:function(){if(3!=openAppController.newsDownloadState){openAppController.newsDownloadState=2;var e=document.getElementById("imgdownload");if(e&&"news"==e.getAttribute("app")){downloadClick.clearStyle(e),Q.addClass(e,"client_new_install");var n=e.querySelector("span.down-text");n&&(n.innerHTML='<span class="down-text1">下载已完成，</span><span class="down-text2">直接打开腾讯新闻</span>')}var o=document.querySelectorAll(".unified_downloader");if(o){for(var t=0,a=o.length;a>t;t++){var i=o[t],l=i.id;if(!l||!moduleInfo)break;var r=moduleInfo[l];if(!r)break;if(i&&"news"==i.getAttribute("type")){var d=i.querySelector(".downloader_text");d.innerHTML="安装腾讯新闻客户端";var s=i.querySelector(".downloader_progress");s&&(s.style.display="none"),downloadClick.clearModuleStyle(i),Q.addClass(i,"downloader_install")}}openAppController.sendBoss("succDownLoad")}}},stopDownload:function(e){var n=downloadInit.newsDownloadValue;n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("cancelDownloadTask",{download_id:n,file_md5:downloadMd5},function(e){var n=e.err_msg;n.indexOf("cancel_download_task:ok")>-1?(downloadClick.showDefaultState(),openAppController.sendBoss("stopDownLoad")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},clearStyle:function(e){Q.removeClass(e,"client_new_install"),Q.removeClass(e,"client_new_downloading"),Q.removeClass(e,"client_new_tips")},clearModuleStyle:function(e){Q.removeClass(e,"downloader_download"),Q.removeClass(e,"downloader_downloading"),Q.removeClass(e,"downloader_install")},installDownload:function(e){var n=downloadInit.newsDownloadValue;n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("installDownloadTask",{download_id:n,file_md5:downloadMd5},function(e){var n=e.err_msg;if(n.indexOf("install_download_task:ok")>-1){var o=setInterval(function(){clearInterval(o),openAppController.checkIsInstall()},500);openAppController.sendBoss("installNewsApp")}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1}},downloadClickVideo={downloadId:"VideodownloadId",taskName:"TencentVideo",queryDownloadState:function(){var e=downloadInit.videoDownloadValue;e&&WeixinJSBridge.invoke("queryDownloadTask",{download_id:e},function(e){downloadClickVideo.downloadStateChange(e)})},downloadStateChange:function(e){e&&e.state&&(e.download_id&&e.download_id!=downloadInit.videoDownloadValue||("download_succ"==e.state&&downloadClickVideo.downloadComplete(),"default"==e.state,"downloading"==e.state&&downloadClickVideo.showDownloading(),"download_fail"==e.state&&downloadClickVideo.clearTask()))},clickHandler:function(e){var n=e.target;"a"!=n.tagName.toLowerCase()&&(n=Q.parent(n,function(e){return"a"==e.tagName.toLowerCase()?!0:!1})),Q.hasClass(n,"client_video_new_downloading")?downloadClickVideo.stopDownload(n):Q.hasClass(n,"client_video_new_tips")?downloadClickVideo.startDownload(n):Q.hasClass(n,"client_video_new_install")&&downloadClickVideo.installDownload(n)},startDownload:function(e){var n=e.href;"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("addDownloadTask",{task_name:downloadClickVideo.taskName,task_url:n,file_md5:downloadVideoMD5},function(e){var n=e.err_msg;if(n.indexOf("add_download_task:ok")>-1){var o=e.download_id,t=downloadInit.videoDownloadName;downloadInit.videoDownloadValue=o,Q.setData(t,o),downloadClickVideo.showDownloading(),openAppController.sendBoss("startDownLoadVideo"),-1==document.location.href.indexOf("isShare=1")&&Q.remoteSetData(t,o,function(e){})}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},showDefaultState:function(){var e=document.getElementById("imgdownload");if(e&&"video"==e.getAttribute("app")){downloadClickVideo.clearStyle(e),Q.addClass(e,"client_video_new_tips");var n=e.querySelector("span.down-text");n&&(n.innerHTML="下载腾讯视频客户端")}var o=document.querySelectorAll(".unified_downloader");if(o)for(var t=0,a=o.length;a>t;t++){var i=o[t],l=i.id;if(l&&moduleInfo){var r=moduleInfo[l];if(r&&i&&"video"==i.getAttribute("type")){var d=i.querySelector(".downloader_text");d.innerHTML=r.downloadText;var s=i.querySelector(".downloader_progress");s&&(s.style.display="none"),downloadClick.clearModuleStyle(i),Q.addClass(i,"downloader_download")}}}},showDownloading:function(){openAppController.videoDownloadState=2;var e=document.getElementById("imgdownload");if(e&&"video"==e.getAttribute("app")){downloadClickVideo.clearStyle(e),Q.addClass(e,"client_video_new_downloading");var n=e.querySelector("span.down-text");n&&(n.innerHTML="正下载腾讯视频客户端")}var o=document.querySelectorAll(".unified_downloader");if(o)for(var t=0,a=o.length;a>t;t++){var i=o[t],l=i.id;if(!l||!moduleInfo)break;var r=moduleInfo[l];if(!r)break;if(i&&"video"==i.getAttribute("type")){var d=i.querySelector(".downloader_text");d.innerHTML="正下载腾讯视频客户端";var s=i.querySelector(".downloader_progress");s&&(s.style.display="block"),downloadClick.clearModuleStyle(i),Q.addClass(i,"downloader_downloading")}}},clearTask:function(){if(window.localStorage&&localStorage.removeItem)try{window.localStorage.clear()}catch(e){window.localStorage.clear()}var n=downloadInit.videoDownloadName;Q.remoteSetData(n,"",function(e){})},downloadComplete:function(){if(3!=openAppController.videoDownloadState){openAppController.videoDownloadState=2;var e=document.getElementById("imgdownload");if(e&&"video"==e.getAttribute("app")){downloadClickVideo.clearStyle(e),Q.addClass(e,"client_video_new_install");var n=e.querySelector("span.down-text");n&&(n.innerHTML='<span class="down-text1">下载已完成，</span><span class="down-text2">直接打开腾讯视频</span>')}var o=document.querySelectorAll(".unified_downloader");if(o){for(var t=0,a=o.length;a>t;t++){var i=o[t],l=i.id;if(!l||!moduleInfo)break;var r=moduleInfo[l];if(!r)break;if(i&&"video"==i.getAttribute("type")){var d=i.querySelector(".downloader_text");d.innerHTML="安装腾讯视频客户端";var s=i.querySelector(".downloader_progress");s&&(s.style.display="none"),downloadClick.clearModuleStyle(i),Q.addClass(i,"downloader_install")}}openAppController.sendBoss("succDownLoadVideo")}}},stopDownload:function(e){var n=downloadInit.videoDownloadValue;n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("cancelDownloadTask",{download_id:n,file_md5:downloadVideoMD5},function(e){var n=e.err_msg;n.indexOf("cancel_download_task:ok")>-1?(downloadClickVideo.showDefaultState(),openAppController.sendBoss("stopDownLoadVideo")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},clearStyle:function(e){Q.removeClass(e,"client_new_install"),Q.removeClass(e,"client_new_downloading"),Q.removeClass(e,"client_new_tips"),Q.removeClass(e,"client_video_new_install"),Q.removeClass(e,"client_video_new_downloading"),Q.removeClass(e,"client_video_new_tips")},clearModuleStyle:function(e){Q.removeClass(e,"downloader_download"),Q.removeClass(e,"downloader_downloading"),Q.removeClass(e,"downloader_install")},installDownload:function(e){var n=downloadInit.videoDownloadValue;n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("installDownloadTask",{download_id:n,file_md5:downloadVideoMD5},function(e){var n=e.err_msg;if(n.indexOf("install_download_task:ok")>-1){var o=setInterval(function(){clearInterval(o),openAppController.checkIsInstall()},500);openAppController.sendBoss("installNewsAppVideo")}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1}},downloadClickQnreading={downloadId:"QnreadingdownloadId",taskName:kuaibaoName,queryDownloadState:function(){var e=downloadInit.qnreadingDownloadValue;e&&WeixinJSBridge.invoke("queryDownloadTask",{download_id:e},function(e){downloadClickQnreading.downloadStateChange(e)})},downloadStateChange:function(e){e&&e.state&&(e.download_id&&e.download_id!=downloadInit.qnreadingDownloadValue||("download_succ"==e.state&&downloadClickQnreading.downloadComplete(),"default"==e.state,"downloading"==e.state&&downloadClickQnreading.showDownloading(),"download_fail"==e.state&&downloadClickQnreading.clearTask()))},clickHandler:function(e){var n=e.target;"a"!=n.tagName.toLowerCase()&&(n=Q.parent(n,function(e){return"a"==e.tagName.toLowerCase()?!0:!1})),Q.hasClass(n,"client_video_new_downloading")?downloadClickQnreading.stopDownload(n):Q.hasClass(n,"client_video_new_tips")?downloadClickQnreading.startDownload(n):Q.hasClass(n,"client_video_new_install")&&downloadClickQnreading.installDownload(n)},startDownload:function(e){var n=e.href;"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("addDownloadTask",{task_name:downloadClickQnreading.taskName,task_url:n,file_md5:downloadQRMd5},function(e){var n=e.err_msg;if(n.indexOf("add_download_task:ok")>-1){var o=e.download_id,t=downloadInit.qnreadingDownloadName;downloadInit.qnreadingDownloadValue=o,Q.setData(t,o),downloadClickQnreading.showDownloading(),openAppController.sendBoss("startDownLoadQnreading"),-1==document.location.href.indexOf("isShare=1")&&Q.remoteSetData(t,o,function(e){})}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},showDefaultState:function(){var e=document.querySelectorAll(".unified_downloader");if(e)for(var n=0,o=e.length;o>n;n++){var t=e[n],a=t.id;if(a&&moduleInfo){var i=moduleInfo[a];if(i&&t&&"qnreading"==t.getAttribute("type")){var l=t.querySelector(".downloader_text");l.innerHTML=i.downloadText;var r=t.querySelector(".downloader_progress");r&&(r.style.display="none"),downloadClickQnreading.clearModuleStyle(t),Q.addClass(t,"downloader_download")}}}},showDownloading:function(){openAppController.qnreadingDownloadState=2;var e=document.querySelectorAll(".unified_downloader");if(e){var e=document.querySelectorAll(".unified_downloader");if(e)for(var n=0,o=e.length;o>n;n++){var t=e[n],a=t.id;if(!a||!moduleInfo)break;var i=moduleInfo[a];if(!i)break;if(t&&"qnreading"==t.getAttribute("type")){var l=t.querySelector(".downloader_text");l.innerHTML="正下载"+kuaibaoName+"客户端";var r=t.querySelector(".downloader_progress");r&&(r.style.display="block"),downloadClickQnreading.clearModuleStyle(t),Q.addClass(t,"downloader_downloading")}}}},clearTask:function(){if(window.localStorage&&localStorage.removeItem)try{window.localStorage.clear()}catch(e){window.localStorage.clear()}var n=downloadInit.qnreadingDownloadName;Q.remoteSetData(n,"",function(e){})},downloadComplete:function(){if(3!=openAppController.qnreadingDownloadState){openAppController.qnreadingDownloadState=2;var e=document.querySelectorAll(".unified_downloader");if(e){for(var n=0,o=e.length;o>n;n++){var t=e[n],a=t.id;if(!a||!moduleInfo)break;var i=moduleInfo[a];if(!i)break;if(t&&"qnreading"==t.getAttribute("type")){var l=t.querySelector(".downloader_text");l.innerHTML="安装"+kuaibaoName+"，看更多有趣新闻";var r=t.querySelector(".downloader_progress");r&&(r.style.display="none"),downloadClickQnreading.clearModuleStyle(t),Q.addClass(t,"downloader_install")}}openAppController.sendBoss("succDownLoadQnreading")}}},stopDownload:function(e){var n=downloadInit.qnreadingDownloadValue;n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("cancelDownloadTask",{
download_id:n,file_md5:downloadVideoMD5},function(e){var n=e.err_msg;n.indexOf("cancel_download_task:ok")>-1?(downloadClickQnreading.showDefaultState(),openAppController.sendBoss("stopDownLoadQnreading")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},clearStyle:function(e){Q.removeClass(e,"client_new_install"),Q.removeClass(e,"client_new_downloading"),Q.removeClass(e,"client_new_tips"),Q.removeClass(e,"client_video_new_install"),Q.removeClass(e,"client_video_new_downloading"),Q.removeClass(e,"client_video_new_tips")},clearModuleStyle:function(e){Q.removeClass(e,"downloader_download"),Q.removeClass(e,"downloader_downloading"),Q.removeClass(e,"downloader_install")},installDownload:function(e){var n=downloadInit.qnreadingDownloadValue;n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("installDownloadTask",{download_id:n,file_md5:downloadVideoMD5},function(e){var n=e.err_msg;if(n.indexOf("install_download_task:ok")>-1){var o=setInterval(function(){clearInterval(o),openAppController.checkIsInstall()},500);openAppController.sendBoss("installQnreading")}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1}},downloadClickWeishi={downloadId:"WeishidownloadId",taskName:"微视",queryDownloadState:function(){var e=Q.getData(downloadClickWeishi.downloadId);e&&WeixinJSBridge.invoke("queryDownloadTask",{download_id:e},function(e){downloadClickWeishi.downloadStateChange(e)})},downloadStateChange:function(e){e&&e.state&&(e.download_id&&e.download_id!=Q.getData(downloadClickWeishi.downloadId)||("download_succ"==e.state&&downloadClickWeishi.downloadComplete(),"default"==e.state&&downloadClickWeishi.showDefaultState(),"downloading"==e.state&&downloadClickWeishi.showDownloading(),"download_fail"==e.state&&downloadClickWeishi.clearTask()))},clickHandler:function(e){var n=e.target;"a"!=n.tagName.toLowerCase()&&(n=Q.parent(n,function(e){return"a"==e.tagName.toLowerCase()?!0:!1})),Q.hasClass(n,"client_weishi_new_downloading")?downloadClickWeishi.stopDownload(n):Q.hasClass(n,"client_weishi_new_tips")?downloadClickWeishi.startDownload(n):Q.hasClass(n,"client_weishi_new_install")&&downloadClickWeishi.installDownload(n)},startDownload:function(e){var n=e.href;"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("addDownloadTask",{task_name:downloadClickWeishi.taskName,task_url:n,file_md5:downloadWeishiMD5},function(e){var n=e.err_msg;if(n.indexOf("add_download_task:ok")>-1){var o=e.download_id;Q.setData(downloadClickWeishi.downloadId,o),downloadClickWeishi.showDownloading(),openAppController.sendBoss("startDownLoadWeishi")}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},showDefaultState:function(){var e=document.getElementById("imgdownload");if(e&&"weishi"==e.getAttribute("app")){downloadClickWeishi.clearStyle(e),Q.addClass(e,"client_weishi_new_tips");var n=e.querySelector("span.down-text");n&&(n.innerHTML="下载腾讯微视客户端")}},showDownloading:function(){var e=document.getElementById("imgdownload");if(e&&"weishi"==e.getAttribute("app")){downloadClickWeishi.clearStyle(e),Q.addClass(e,"client_weishi_new_downloading");var n=e.querySelector("span.down-text");n&&(n.innerHTML="正下载腾讯微视客户端")}},clearTask:function(){if(window.localStorage&&localStorage.removeItem)try{window.localStorage.clear()}catch(e){window.localStorage.clear()}},downloadComplete:function(){var e=document.getElementById("imgdownload");if(e&&"weishi"==e.getAttribute("app")){downloadClickWeishi.clearStyle(e),Q.addClass(e,"client_weishi_new_install");var n=e.querySelector("span.down-text");n&&(n.innerHTML='<span class="down-text1">下载已完成，</span><span class="down-text2">直接打开微视</span>'),openAppController.sendBoss("succDownLoadWeishi")}},stopDownload:function(e){var n=Q.getData(downloadClickWeishi.downloadId);n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("cancelDownloadTask",{download_id:n,file_md5:downloadWeishiMD5},function(n){var o=n.err_msg;if(o.indexOf("cancel_download_task:ok")>-1){downloadClickWeishi.clearStyle(e),Q.addClass(e,"client_weishi_new_tips");var t=el.querySelector("span.down-text");t&&(t.innerHTML="下载腾讯微视客户端"),openAppController.sendBoss("stopDownLoadWeishi")}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},clearStyle:function(e){Q.removeClass(e,"client_new_install"),Q.removeClass(e,"client_new_downloading"),Q.removeClass(e,"client_new_tips"),Q.removeClass(e,"client_weishi_new_install"),Q.removeClass(e,"client_weishi_new_downloading"),Q.removeClass(e,"client_weishi_new_tips")},installDownload:function(e){var n=Q.getData(downloadClickWeishi.downloadId);n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("installDownloadTask",{download_id:n,file_md5:downloadWeishiMD5},function(e){var n=e.err_msg;if(n.indexOf("install_download_task:ok")>-1){var o=setInterval(function(){clearInterval(o),openAppController.checkIsInstall()},500);openAppController.sendBoss("installNewsAppWeishi")}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1}},winPhoneController={isWinPhone:!1,init:function(e){winPhoneController.config(),winPhoneController.isWinPhone&&winPhoneController.hideElement(e)},config:function(){var e=navigator.userAgent.toLowerCase();winPhoneController.isWinPhone=e.match(/windows phone/)?!0:!1},hideElement:function(e){var n;if("object"==typeof e)n=e;else{if("string"!=typeof e)return;n=document.querySelectorAll(e)}if(n.length)for(var o=0,t=n.length;t>o;o++){var a=n[o];a instanceof HTMLElement&&(a.style.display="none")}else n instanceof HTMLElement&&(n.style.display="none")}};window.addEventListener("load",function(){FastClick.attach(document.body)},!1),showMoreNews.init(),winPhoneController.init(".atlas,.relatedNews,.videoClips,.comment"),"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?weChatBridgeReady.init():document.addEventListener("WeixinJSBridgeReady",weChatBridgeReady.init);var downloadInit={Called:!1,newsDownloadId:"downloadNews",videoDownloadId:"downloadVideo",qnreadingDownloadId:"downloadQnreading",newsDownloadName:null,videoDownloadName:null,qnreadingDownloadName:null,newsDownloadValue:void 0,videoDownloadValue:void 0,qnreadingDownloadValue:void 0,mmuin:null,init:function(){var e=document.location.href;downloadInit.mmuin=downloadInit.getQuery(e,"mmuin")||downloadInit.getQuery(e,"openid"),downloadInit.newsDownloadName=downloadInit.newsDownloadId+"_"+downloadInit.mmuin,downloadInit.videoDownloadName=downloadInit.videoDownloadId+"_"+downloadInit.mmuin,downloadInit.qnreadingDownloadName=downloadInit.qnreadingDownloadId+"_"+downloadInit.mmuin;var n=downloadInit.newsDownloadName+","+downloadInit.videoDownloadName+","+downloadInit.qnreadingDownloadName,o=navigator.userAgent.toLowerCase(),t=/android/i.test(o)?!0:!1;t?(Q.getData(downloadInit.newsDownloadName)||-1!=e.indexOf("isShare=1")?(downloadInit.Called=!0,downloadInit.newsDownloadValue=Q.getData(downloadInit.newsDownloadName),downloadInit.videoDownloadValue=Q.getData(downloadInit.videoDownloadName),downloadInit.qnreadingDownloadValue=Q.getData(downloadInit.qnreadingDownloadName),openAppController.initStart()):Q.remoteGetData(n,downloadInit.setIdFromCloud),downloadInit.recheck(downloadInit.newsDownloadName,downloadInit.videoDownloadName,downloadInit.qnreadingDownloadName)):openAppController.initStart()},setIdFromCloud:function(e){downloadInit.Called||(void 0==e.ret||0==e.ret)&&(downloadInit.newsDownloadValue=e.data[downloadInit.newsDownloadName],downloadInit.videoDownloadValue=e.data[downloadInit.videoDownloadName],downloadInit.qnreadingDownloadValue=e.data[downloadInit.qnreadingDownloadName],downloadInit.newsDownloadValue&&(Q.setData(downloadInit.newsDownloadName,downloadInit.newsDownloadValue),Q.setData(downloadInit.videoDownloadName,downloadInit.videoDownloadValue),Q.setData(downloadInit.qnreadingDownloadName,downloadInit.qnreadingDownloadValue)),downloadInit.Called=!0,openAppController.initStart())},recheck:function(e,n,o){setTimeout(function(){if(!downloadInit.Called){var t={data:{name1:"",name2:"",name3:""}};t.data[e]=Q.getData(e),t.data[n]=Q.getData(n),t.data[o]=Q.getData(o),downloadInit.setIdFromCloud(t)}},3e3)},getQuery:function(e,n){var o=new RegExp("(^|&|\\?|#)"+n+"=([^&#]*)(&|$|#)",""),t=e.match(o);return t?t[2]:""}};downloadInit.init();/*  |xGv00|69fdf8db7f9e624fe426dec4f01d42cc */